# control_base_system
## 总述：
用于存储并管理呼吸传感器的读取与数据处理，以及外设的操作信息；之后可能会继续附加详细的控制与显示功能。
## 功能表述：
- for_Arduino文件夹存放基于Arduino Nano ESP32单片机的基本控制程序，已经可以完成对2个XGZP气压计、1个ACD1100二氧化碳传感器、1个AO08氧气传感器以及1个流量计进行读取的代码，此外还含有ADS1115、I2CMux转接以及OLED设备的控制代码；
    - XGZP气压计：可以读取数据，但是ADC值转化函数有误，需要重新校准；仅支持I2C通讯。[BreathController库]
    - ACD1100二氧化碳传感器：可以读取数据且比较准确，目前来看应该是最可靠的元件；可以支持I2C通讯以及UART通讯，当前使用I2C通讯。[gas_concentration库]
    - AO08氧气传感器（TRS线路）：暂时读不到合理的数据，硬件线路可能还需要调试。目前使用的是ADS1115读取方案，与技术手册中直接使用运算放大器的方案不同（因为运放没办法装在面包板上），读不到合理数据有可能与此有关。ADS1115使用I2C通讯，通过差分方式读取数据，且对信号（理论上为9~13mV）进行增益放大。[该硬件由独立程序控制，见AO08_Calibration_Test文件夹]
    - 流量计：之前编写过代码，但已经废弃，最好重新编写后进行调试。
    - ADS1115：一款16位精度的ADC，同时支持大增益，可以在转化信号的同时放大信号。因此，也有放大噪声的可能性。[ADS1115库]
    - I2C多路转接板：由于需要使用I2C通讯方式的硬件较多，因此使用转接板来提供多路选择。该板的通讯地址为0x70，共有8个拓展位可选，所有硬件的接口设置在主代码中可见。[I2CMux库]
    - OLED：一个12864的OLED小屏幕，需要显示什么信息直接在库对应的cpp文件中修改即可。[OLEDDisplay库]
    - 综上，各元件的具体参数详见各技术手册，如果没有技术手册请直接搜素；代码中可能存在一些没有完全删除的废码，通常不影响使用；如果希望删改或添加功能，建议使用AI，否则改动量还是比较大的。
